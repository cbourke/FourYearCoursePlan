var cse={version:"0.1.0",courses:[],schedule:null,transferTermCode:1E3,currentSemester:1138,addTerm:function(a){console.log("adding term...");var b=parseInt(a);if(b==cse.transferTermCode){console.log("adding transfer term to schedule...");if(cse.schedule.transferCourses)return console.log("transfer term already present"),!1;cse.schedule.transferCourses=[]}else if(0==this.schedule.termCodes.length)console.log("adding term "+b),this.schedule.termCodes.push(b.toString()),this.schedule[b.toString()]=
[];else{if(-1!=this.schedule.termCodes.indexOf(b.toString()))return console.log("schedule already contains term "+b),!1;console.log("adding range...");a=[];for(var c=Math.min(b,parseInt(this.schedule.termCodes[0])),d=Math.max(b,parseInt(this.schedule.termCodes[this.schedule.termCodes.length-1]));c<=d;c=cse.termCodeCalc(c,cse.termCodeOffsets.NEXT))(6!=c%10||-1<cse.schedule.termCodes.indexOf(c.toString())||c==b)&&a.push(c.toString());cse.schedule.termCodes=a;for(b=0;b<a.length;b++)cse.schedule[a[b]]||
(cse.schedule[a[b]]=[])}console.log(cse.schedule);cse.setSchedule(cse.schedule);return!0},trimTerms:function(){cse.schedule.transferCourses&&0==cse.schedule.transferCourses.length&&delete cse.schedule.transferCourses;for(var a=[],b=0;b<cse.schedule.termCodes.length&&0==cse.schedule[cse.schedule.termCodes[b]].length;b++)a.push(cse.schedule.termCodes[b]);for(b=cse.schedule.termCodes.length-1;0<=b&&0==cse.schedule[cse.schedule.termCodes[b]].length;b--)-1==a.indexOf(cse.schedule.termCodes[b])&&a.push(cse.schedule.termCodes[b]);
for(b=0;b<cse.schedule.termCodes.length;b++)6==cse.schedule.termCodes[b]%10&&0==cse.schedule[cse.schedule.termCodes[b]].length&&-1==a.indexOf(cse.schedule.termCodes[b])&&a.push(cse.schedule.termCodes[b]);console.log("remove Terms: "+a);for(b=0;b<a.length;b++)cse.schedule.termCodes.splice(cse.schedule.termCodes.indexOf(a[b]),1),delete cse.schedule[a[b]];cse.setSchedule(cse.schedule)},termCodeOffsets:{NEXT:1,PREVIOUS:2},termCodeCalc:function(a,b){a=parseInt(a);return b===this.termCodeOffsets.PREVIOUS?
8==a%10?a-2:1==a%10?a-3:6==a%10?a-5:null:b===this.termCodeOffsets.NEXT?8==a%10?a+3:1==a%10?a+5:6==a%10?a+2:null:null},adviserLoad:function(){var a=$("#userLogin").val();console.log("loading schedule for user "+a);$("#studentSearch").val("");$("#userLogin").val("");cse.user=a;cse.loadRemote();$(".currentUser").text(cse.user)},createEmptySchedule:function(a){for(var b={termCodes:[]},c=0;8>c;c++)b.termCodes.push(a.toString()),b[a.toString()]=[],0==a%2?a+=3:a+=7;return b},setCourses:function(a){console.log("setting up courses...");
this.coursesByUiGroup=a;$.each(a,function(a,c){$.each(c,function(a,b){cse.courses.push(b)})});this.courses.sort(function(a,c){return a.courseId.localeCompare(c.courseId)})},addCourse:function(a){if(null!=this.getCourseById(a.courseId))return console.log("WARNING: attempted to addCourse "+a.courseId+" but it already exists"),!1;console.log("adding course "+a.courseId+" to cse.courses...");for(var b=0;0>cse.courses[b].courseId.localeCompare(a.courseId);)b++;cse.courses.splice(b,0,a);return!0},getCourseById:function(a){for(var b=
0,c=this.courses.length-1,d,e;b<=c;)if(d=Math.floor((b+c)/2),e=this.courses[d].courseId.localeCompare(a),0>e)b=d+1;else if(0<e)c=d-1;else return this.courses[d];return null},setSchedule:function(a){1==a.termCodes[0]%10&&(a.termCodes.unshift((a.termCodes[0]-3).toString()),a[a.termCodes[0].toString()]=[]);8==a.termCodes[a.termCodes.length-1]%10&&(a.termCodes.push((parseInt(a.termCodes[a.termCodes.length-1])+3).toString()),a[a.termCodes[a.termCodes.length-1].toString()]=[]);this.schedule=a;cse.setOptions();
cse.ui.initializeSchedule()},setOptions:function(){$("input[name='degreeType'][value='"+this.schedule.degreeTypeId+"']").prop("checked",!0)},scheduleCourse:function(a,b){var c=cse.getCourseById(a);null==c?console.log("Warning: course, "+a+" not recognized"):(cse.unscheduleCourse(a),console.log("adding "+c.courseId+" to "+b),b==cse.transferTermCode?this.schedule.transferCourses.push(a):this.schedule[b.toString()].push(a))},unscheduleCourse:function(a){if(cse.schedule.transferCourses&&-1<cse.schedule.transferCourses.indexOf(a))console.log("removing "+
a+" from transfer credits"),cse.schedule.transferCourses.splice(cse.schedule.transferCourses.indexOf(a),1);else for(var b=0;b<this.schedule.termCodes.length;b++){var c=this.schedule.termCodes[b].toString(),d=this.schedule[c];null==d&&console.log("Warning: term, "+this.schedule.termCodes[b].toString()+" does not appear to exist");for(var e=0;e<d.length;e++)d[e]==a&&(console.log("removing "+a+" from "+c),d.splice(e,1))}},getPdf:function(){var a="<form action='./pdfSchedule' method='post'><input type='hidden' name='schedule' value='"+
JSON.stringify(cse.schedule)+"'/>";cse.user&&(a+="<input type='hidden' name='user' value='"+cse.user+"'/>");$(a+"</form>").appendTo("body").submit().remove()},saveLocal:function(){$("#informationDiv").html("");localStorage.setItem("schedule",JSON.stringify(this.schedule));cse.ui.addAlertDiv(cse.ui.alertValues.SUCCESS,"Schedule successfullly saved to local storage.",$("#informationDiv"))},saveRemote:function(){$("#informationDiv").html('<img src="./img/loading48x48-trans.gif" style="margin-left: 1em; margin-top: 1em;" alt="loading"/>');
var a={schedule:JSON.stringify(this.schedule)};cse.user&&(a.user=cse.user);$.ajax({type:"POST",url:"./secure/saveSchedule",data:a,success:function(a){console.log("saveRemote success");"success"===a.status?cse.ui.addAlertDiv(cse.ui.alertValues.SUCCESS,"Schedule successfullly saved to database.",$("#informationDiv")):this.error()},error:function(){cse.ui.addAlertDiv(cse.ui.alertValues.ERROR,"Unable to save schedule to database.",$("#informationDiv"))}})},loadLocal:function(){$("#informationDiv").html("");
cse.setSchedule(JSON.parse(localStorage.getItem("schedule")));cse.ui.addAlertDiv(cse.ui.alertValues.SUCCESS,"Schedule successfullly loaded from local storage.",$("#informationDiv"))},loadRemote:function(){$("#informationDiv").html('<img src="./img/loading48x48-trans.gif" style="margin-left: 1em; margin-top: 1em;" alt="loading"/>');var a={};cse.user&&(a={user:cse.user});$.ajax({url:"./secure/loadSchedule",data:a,success:function(a){a.termCodes?(cse.setSchedule(a),cse.ui.addAlertDiv(cse.ui.alertValues.SUCCESS,
"Schedule successfullly loaded from the database.",$("#informationDiv"))):(cse.loadNewEmptySchedule(),cse.ui.addAlertDiv(cse.ui.alertValues.SUCCESS,"No schedule has yet been saved to the database.",$("#informationDiv")))},error:function(){cse.ui.addAlertDiv(cse.ui.alertValues.ERROR,"Unable to load schedule from database.",$("#informationDiv"))}})},ui:{courseElementPrefix:"ui-course-",scheduledCourseElementPrefix:"ui-scheduled-course-",termElementPrefix:"ui-term-",monthToTermMap:{1:"Spring",6:"Summer",
7:"Summer",8:"Fall"},scheduleMap:{"fall,spring,even,odd":"Every fall and spring semester","fall,spring,summer,even,odd":"Every fall, spring, and summer semester","fall,even,odd":"Every fall semester","spring,even,odd":"Every spring semester","fall,odd":"Every fall semester in an odd year","fall,even":"Every fall semester in an even year","spring,odd":"Every spring semester in an odd year","spring,even":"Every spring semester in an even year"},cloneHelper:function(){return $(this).clone().width($(this).width())},
addTerm:function(){var a=document.getElementById("newTermSem"),a=parseInt(a.options[a.selectedIndex].value),a=1E3+parseInt($("#newTermYear").val())%100*10+a;console.log("adding term "+a+"...");cse.addTerm(a)?cse.ui.addAlertDiv(cse.ui.alertValues.SUCCESS,"Successfully added term(s), you may now schedule courses.",$("#informationDiv")):cse.ui.addAlertDiv(cse.ui.alertValues.ERROR,"Did not add term(s), they were already part of your schedule.",$("#informationDiv"))},addCourse:function(a){var b=cse.getCourseById(a);
b?1<$("#"+this.courseElementPrefix+b.courseId).length?console.log("attempted to add course UI for course "+a+" but it already exists"):(a=cse.ui.createCourseDiv(b),$(a).hide(),b.uiGroup?(b=b.uiGroup.replace(/\s+/g,""),$("#courseMenuGroup-"+b+"-list").append(a)):$("#customCourseList").append(a),$(a).show("fade").draggable({helper:cse.ui.cloneHelper,revert:"invalid"})):console.log("attempted to add course "+a+" to UI but it does not exist in cse.courses")},scheduleCourse:function(a,b){var c=cse.getCourseById(a);
null==c?console.log("WARNING: courseId = "+a+" invalid"):($("#"+cse.ui.courseElementPrefix+a).draggable("disable"),0<$("#"+cse.ui.scheduledCourseElementPrefix+a).length&&(console.log(cse.ui.scheduledCourseElementPrefix+a+" exists, removing..."),$("#"+cse.ui.scheduledCourseElementPrefix+a).remove()),console.log(a+" ui element dropped to "+b),cse.ui.createCourseDiv(c).attr("id",cse.ui.scheduledCourseElementPrefix+a).appendTo($("#"+cse.ui.termElementPrefix+b+" .termCourseList")).hide().show("fade").draggable({helper:cse.ui.cloneHelper,
revert:"invalid"}),cse.ui.updateCreditHours())},unscheduleCourse:function(a){0<$("#"+cse.ui.scheduledCourseElementPrefix+a).length&&(console.log(cse.ui.scheduledCourseElementPrefix+a+" exists, removing..."),$("#"+cse.ui.scheduledCourseElementPrefix+a).remove());$("#"+cse.ui.courseElementPrefix+a).draggable("enable").hide().show("highlight");cse.ui.updateCreditHours()},updateCreditHours:function(){var a=0;if(cse.schedule.transferCourses&&0<cse.schedule.transferCourses.length){console.log("updating transfer credit hours");
for(var b=0,c=cse.schedule.transferCourses,d=0;d<c.length;d++){var e=cse.getCourseById(c[d]);null==e?console.log("Warning: course "+c[d]+" does not exist"):b+=parseInt(e.creditHours)}$("#"+cse.ui.termElementPrefix+cse.transferTermCode+" .creditHours").text("Credit Hours: "+b);a+=b}else $("#"+cse.ui.termElementPrefix+cse.transferTermCode+" .creditHours").text("Credit Hours: 0");for(var f=0;f<cse.schedule.termCodes.length;f++){for(var g=cse.schedule.termCodes[f].toString(),c=cse.schedule[g],d=b=0;d<
c.length;d++)e=cse.getCourseById(c[d]),null==e?console.log("Warning: course "+c[d]+" does not exist"):b+=parseInt(e.creditHours);$("#"+cse.ui.termElementPrefix+g+" .creditHours").text("Credit Hours: "+b);a+=b}$("#totalCreditHours").text("Total Credit Hours: "+a)},scheduleToText:function(a){return a&&""!=a?this.scheduleMap[a]:"Unknown"},termCodeToText:function(a){if(a===cse.transferTermCode)return"Transfer Credits";var b=a%10;a=(a-b)/10%100;return cse.ui.monthToTermMap[b]+" "+(10>a?"200":"20")+a},
alertValues:{SUCCESS:["alert-success","label-success","Success!"],ERROR:["alert-error","label-important","Error!"],WARN:[],INFO:["alert-info","label-info","Info"]},addAlertDiv:function(a,b,c){a=$("<div/>").addClass("alert").addClass(a[0]).html('<button type="button" class="close" data-dismiss="alert">&times;</button><span class="label '+a[1]+'">'+a[2]+"</span> "+b);$(c).html("").append(a);a.hide().show("fade",{},1E3)},createCourseGroup:function(a,b){for(var c=a.replace(/\s+/g,""),d=$("<span/>").addClass("ui-accordion-header-icon").addClass("ui-icon").addClass("ui-icon-triangle-1-e").css("float",
"left"),e=$("<h5/>").addClass("ui-widget-header").addClass("ui-corner-all").addClass("collapsable").css("margin",0).css("font-size","10pt").text(a).prepend(d),d=$("<div/>").attr("id","courseMenuGroup-"+c+"-list").hide(),c=$("<div></div>").attr("id","courseMenuGroup-"+c).addClass("ui-widget-content").addClass("ui-corner-all").addClass("courseList").append(e).append(d),e=0;e<b.length;e++)d.append(this.createCourseDiv(b[e]));return c},toParagraph:function(a){return a&&""!==a?"<p>"+a+"</p>":""},createCourseDetailDiv:function(a){var b=
"<h4>"+a.subject+" "+a.number+"</h4><p>"+a.title+"</p><p>Description: "+a.description+"</p><p>Credit Hours: "+a.creditHours+"</p><p>Schedule: "+this.scheduleToText(a.schedule)+"</p>";a.prerequisiteText&&(b+="<p>Prerequisites: "+a.prerequisiteText+"</p>");a.aces&&(b+="<p>Satisfies ACE Outcome(s): "+a.aces+"</p>");a.adviserComment&&(b+="<p>Adivser Comment: "+a.adviserComment+"</p>");return b},createCourseDiv:function(a){var b=$("<img/>").attr("src","./img/draggable16x16-trans.gif").attr("alt","Drag me!").css("float",
"right").css("margin","0px 0px 0px 5px").css("cursor","move"),c=$("<img/>").attr("src","./img/info16x16-trans.png").attr("alt","Click me").css("float","right").css("cursor","pointer");$(c).qtip({content:{text:this.createCourseDetailDiv(a),title:{text:"Course Details",button:!0}},position:{at:"right center",my:"top left",viewport:$(window),effect:!1},show:{event:"click",solo:!0},hide:"unfocus",style:{classes:"qtip-wiki qtip-light qtip-shadow"}});var d=$("<h5/>").css("margin","0em").css("padding","0px").text(a.subject+
" "+a.number);return $("<div/>").attr("id",this.courseElementPrefix+a.courseId).attr("courseId",a.courseId).addClass("ui-state-default").addClass("ui-corner-all").addClass("draggable").css("margin","0.5em").css("padding","3px").append(b).append(c).append(d)},initializeCourseMenu:function(){console.log("initializing course menu...");$("#courseMenu").html("");$.each(cse.coursesByUiGroup,function(a,b){var c=cse.ui.createCourseGroup(a,b);$("#courseMenu").append(c)});$("#courseMenuGroup-CoreCSCECourses-list").show("blind",
{},2E3);$("#courseMenuGroup-CoreCSCECourses h5.collapsable span").toggleClass("ui-icon-triangle-1-e ui-icon-triangle-1-s");$("#courseMenu").sortable({containment:"parent"});$(".collapsable").click(function(){$("span",this).toggleClass("ui-icon-triangle-1-e ui-icon-triangle-1-s");$(this).next().toggle("blind",{},500)});$(".courseList .draggable").draggable({helper:cse.ui.cloneHelper,revert:"invalid"});$("#courseMenuContainer").droppable({drop:function(a,b){var c=b.draggable.attr("id").split("-").slice(-1)[0];
cse.unscheduleCourse(c);cse.ui.unscheduleCourse(c)}})},createTerm:function(a){var b=$("<h4>"+cse.ui.termCodeToText(a)+"</h4>").css("margin","0.25em"),c=$("<div/>").addClass("ui-corner-all").addClass("termCourseList"),d=$("<div/>").addClass("creditHours").text("Credit Hours: 0");return $("<div/>").attr("id",cse.ui.termElementPrefix+a).addClass("ui-corner-all").addClass("span6").addClass("termDiv").append(b).append(c).append(d)},initializeSchedule:function(){$(".draggable").draggable("enable");$("#totalCreditHours").text("Total Credit Hours: 0");
$("#scheduleDiv").html("");if(cse.schedule.transferCourses){var a=cse.ui.createTerm(cse.transferTermCode),b=$("<div/>").attr("id","academicYear"+cse.transferTermCode).addClass("row-fluid").append(a).hide();$("#scheduleDiv").append(b);b.show("fade",{},1E3);for(var c=cse.schedule.transferCourses,b=0;b<c.length;b++){var d=c[b].substring(0,4),e=c[b].substring(4);null==cse.getCourseById(d+e)?cse.addBulletinCourse(d,e,cse.transferTermCode):cse.ui.scheduleCourse(c[b],cse.transferTermCode)}}for(a=0;a<cse.schedule.termCodes.length;a++)if(6==
cse.schedule.termCodes[a]%10){c=cse.ui.createTerm(cse.schedule.termCodes[a]);b=$("<div/>").attr("id","academicYear"+cse.schedule.termCodes[a]).addClass("row-fluid").append(c).hide();$("#scheduleDiv").append(b);b.show("fade",{},1E3);for(var f=cse.schedule.termCodes[a],c=cse.schedule[f],b=0;b<c.length;b++)d=c[b].substring(0,4),e=c[b].substring(4),null==cse.getCourseById(d+e)?cse.addBulletinCourse(d,e,f):cse.ui.scheduleCourse(c[b],f)}else{f=cse.schedule.termCodes[a];b=cse.ui.createTerm(f);c=cse.schedule.termCodes[a+
1];d=cse.ui.createTerm(c);b=$("<div/>").attr("id","academicYear"+cse.schedule.termCodes[a]).addClass("row-fluid").append(b).append(d).hide();$("#scheduleDiv").append(b);b.show("fade",{},1E3);for(var g=cse.schedule[f.toString()],b=0;b<g.length;b++)d=g[b].substring(0,4),e=g[b].substring(4),null==cse.getCourseById(d+e)?cse.addBulletinCourse(d,e,f):cse.ui.scheduleCourse(g[b],f);f=cse.schedule[c.toString()];for(b=0;b<f.length;b++)d=f[b].substring(0,4),e=f[b].substring(4),null==cse.getCourseById(d+e)?cse.addBulletinCourse(d,
e,c):cse.ui.scheduleCourse(f[b],c);a++}$(".termDiv").droppable({activeClass:"ui-state-default",hoverClass:"ui-state-hover",accept:":not(.ui-sortable-helper)",drop:function(a,b){var c=b.draggable.attr("id").split("-").slice(-1)[0],d=a.target.id.split("-").slice(-1)[0];cse.scheduleCourse(c,d);cse.ui.scheduleCourse(c,d)}})}},getParameters:function(){for(var a,b=/\+/g,c=/([^&=]+)=?([^&]*)/g,d=window.location.search.substring(1),e={};a=c.exec(d);)e[decodeURIComponent(a[1].replace(b," "))]=decodeURIComponent(a[2].replace(b,
" "));return e},updateOptions:function(){this.schedule.degreeTypeId=$("input[name='degreeType']:checked").attr("value")},loadNewEmptySchedule:function(a){var b=0;a?(console.log("loading empty schedule for custom term..."),a=document.getElementById("newScheduleSem"),a=parseInt(a.options[a.selectedIndex].value),b=1E3+parseInt($("#newScheduleYear").val())%100*10+a):cse.schedule&&cse.schedule.termCodes?(console.log("loading empty schedule for current schedule term..."),b=cse.schedule.termCodes[0]):(console.log("loading empty schedule default currentSemester..."),
b=cse.currentSemester);console.log("loading empty schedule begining "+b);b=parseInt(b);a=cse.createEmptySchedule(b);console.log(a);cse.setSchedule(a)},buildSchedule:function(){params=cse.getParameters();$.getJSON("./buildSchedule",params,function(a){cse.setSchedule(a);cse.ui.addAlertDiv(cse.ui.alertValues.SUCCESS,"Successfullly built your schedule now you can save, customize, print, etc.!  Be sure to meet with an academic adviser if you have any questions!",$("#informationDiv"))}).fail(function(){console.log("Loading of schedule failed");
$("#scheduleDiv").hide().addClass("alert").html("<strong>Error!</strong> An unexpected error occurred, sorry.").show("bounce",{},1500)})},validateSchedule:function(){$("#validationDiv").html('<img src="./img/loading48x48-trans.gif" style="margin-left: 1em; margin-top: 1em;" alt="loading"/>');$.getJSON("./validateSchedule",{schedule:JSON.stringify(cse.schedule)},function(a){$("#validationDiv").html("");"noerror"===a.status?cse.ui.addAlertDiv(cse.ui.alertValues.SUCCESS,"There are no apparent problems with your schedule!  However, this application is not intended as a degree auditing tool.  Visit with an academic adviser to be sure that your schedule meets all degree requirements.",
$("#validationDiv")):($.each(a.warningMessages,function(a,c){var d=$("<div/>").addClass("alert").html('<button type="button" class="close" data-dismiss="alert">&times;</button><span class="label label-warning">Warning</span> '+c);$("#validationDiv").append(d);d.hide().show("fade",{},1E3)}),$.each(a.errorMessages,function(a,c){var d=$("<div/>").addClass("alert").addClass("alert-error").html('<button type="button" class="close" data-dismiss="alert">&times;</button><span class="label label-important">Error</span> '+
c);$("#validationDiv").append(d);d.hide().show("fade",{},1E3)}))}).fail(function(){cse.ui.addAlertDiv(cse.ui.alertValues.ERROR,"unable to reach the server",$("#validationDiv"))})},initialize:function(){console.log("initializing...");$.getJSON("getCourses",function(a){cse.setCourses(a)}).fail(function(){cse.ui.addAlertDiv(cse.ui.alertValues.ERROR,"An unexpected error occurred, course menu could not be loaded.",$("#courseMenu"));cse.ui.addAlertDiv(cse.ui.alertValues.ERROR,"Could not load schedule due to error loading course menu",
$("#scheduleDiv"))}).success(function(){cse.ui.initializeCourseMenu();cse.initializeSchedule()})},initializeSchedule:function(){console.log("initializing schedule");var a=cse.getParameters();a.buildSchedule?(console.log("building schedule..."),cse.buildSchedule()):a.loadRemote?(console.log("loading remote schedule..."),cse.loadRemote()):a.loadLocal||localStorage.getItem("schedule")?(console.log("loading local schedule..."),cse.loadLocal()):(console.log("loading new empty schedule..."),cse.loadNewEmptySchedule())},
menuAddCourse:function(){var a=$("#customCourseSearch").val();$("#customCourseSearch").val("");var b=null,c=null;try{b=a.substring(0,4).toUpperCase(),c=a.substring(5,-1==a.indexOf(":")?a.length:a.indexOf(":"))}catch(d){console.log("DEBUG: error parsing course search "+d.getMessage());return}cse.addBulletinCourse(b,c)},addBulletinCourse:function(a,b,c){if(null!=cse.getCourseById(a+b))a=$("<div/>").addClass("alert").html("<strong>Warning</strong> Course is already available!").css("margin-top","0.5em").hide(),
$("#customCourseList").append(a),a.show("bounce",{},1500).fadeOut(1E3,function(){this.remove()});else return $.ajax({type:"GET",url:"https://bulletin.unl.edu/undergraduate/courses/"+a+"/"+b+"?format=xml",dataType:"xml",success:function(a){var b={subject:$(a).find('courseCode[type="home listing"] subject').text(),number:$(a).find('courseCode[type="home listing"] courseNumber').text()+$(a).find('courseCode[type="home listing"] courseLetter').text(),title:$(a).find("title").text(),aces:[],prerequisiteText:$(a).find("prerequisite div").text(),
description:$(a).find("description div").text(),creditHours:parseInt($(a).find('credits credit[type="Single Value"]').text())};isNaN(b.creditHours)&&(b.creditHours=0);b.courseId=b.subject+b.number;a=$(a).find("aceOutcomes slo");for(var f=0;f<a.length;f++)b.aces.push($(a[f]).text());cse.addCourse(b);cse.ui.addCourse(b.courseId);c&&(console.log("okay, adding it to the schedule too..."),cse.ui.scheduleCourse(b.courseId,c))},error:function(){console.log("Unable to get course details");var a=$("<div/>").addClass("alert").addClass("alert-error").html("<strong>Error!</strong> unable to fetch course details.").css("margin-top",
"0.5em").hide();$("#customCourseList").append(a);a.show("bounce",{},1500);a.fadeOut(1E3,function(){this.remove()})}}),!1}};
jQuery(document).ready(function(){cse.initialize();$("#newTermYear").spinner();$("#customCourseSearch").keypress(function(a){a=a.keyCode;keyMatch=!1;if(27==a||9==a||13==a)keyMatch=!0,console.log(keyMatch)});$("#studentSearch").autocomplete({minLength:3,source:function(a,b){$.ajax({url:"./secure/admin/searchStudent",dataType:"jsonp",data:{term:a.term,limit:10},success:function(a){console.log("success...");b($.map(a,function(a){return{label:a.label,value:a.value}}))},error:function(){console.log("unable to get info...")}})},
select:function(a,b){$("#studentSearch").val(b.item.label);$("#userLogin").val(b.item.value)}});$("#customCourseSearch").autocomplete({delay:555,minLength:2,search:function(a,b){if(keyMatch)return console.log("invalid key"),!1},source:function(a,b){$.ajax({url:"https://bulletin.unl.edu/undergraduate/courses/search?q="+a.term+"&format=json&limit=10",dataType:"json",success:function(a){for(var d=[],e=0;e<a.length;e++)d[e]={label:a[e].courseCodes[0].subject+" "+a[e].courseCodes[0].courseNumber+": "+
a[e].title+'<span class="key" style="display:none;">'+a[e].courseCodes[0].subject+a[e].courseCodes[0].courseNumber+a[e].title+"</span>",courseInfo:{subject:a[e].courseCodes[0].subject,number:a[e].courseCodes[0].courseNumber,title:a[e].title},value:a[e].courseCodes[0].subject+" "+a[e].courseCodes[0].courseNumber+": "+a[e].title,key:a[e].courseCodes[0].subject+a[e].courseCodes[0].courseNumber+a[e].title};b(d)}})},focus:function(a,b){$("a.indicator").removeClass("indicator");$('a:contains("'+b.item.key+
'")').addClass("indicator")},select:function(a,b){}}).data("ui-autocomplete")._renderItem=function(a,b){return $("<li>").append('<a><span class="label label-info" style="text-align: center">'+b.courseInfo.subject+"<br>"+b.courseInfo.number+'</span> <span style="vertical-align: 25%;">'+b.courseInfo.title+"</span></a>").appendTo(a)}});